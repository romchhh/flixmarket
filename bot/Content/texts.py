"""–¢–µ–∫—Å—Ç–∏ —Ç–∞ –¥–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –±–æ—Ç–∞ (–µ–º–æ–¥–∑—ñ, –¥–∞—Ç–∏, –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è)."""
import re
from datetime import datetime
from html import escape

# –Ñ–¥–∏–Ω–∏–π —Å–ª–æ–≤–Ω–∏–∫ –ø—Ä–µ–º—ñ—É–º-–µ–º–æ–¥–∑—ñ: –∫–ª—é—á -> (custom_emoji_id, fallback_unicode)
PREMIUM_EMOJI: dict[str, tuple[str, str]] = {
    "welcome": ("5269475867720960040", "ü§ê"),
    "cabinet": ("5316727448644103237", "üë§"),
    "catalog": ("5226513232549664618", "üì∫"),
    "about": ("5258503720928288433", "‚ÑπÔ∏è"),
    "referral": ("5258486128742244085", "üë•"),
    "support": ("5260535596941582167", "üí¨"),
    "faq": ("5258093637450866522", "ü§ñ"),
    "calendar": ("5258105663359294787", "üìÖ"),
    "tv": ("5413422358071372326", "üì∫"),
    "money": ("5258204546391351475", "üí∞"),
    "pin": ("5258461531464539536", "üìå"),
    "people": ("5258513401784573443", "üë•"),
    "chart": ("5231200819986047254", "üìä"),
    "check": ("5260416304224936047", "‚úÖ"),
    "card": ("5258204546391351475", "üí≥"),
    "bell": ("5458603043203327669", "üîî"),
    "wave": ("5413694143601842851", "üëã"),
    "box": ("5258134813302332906", "üì¶"),
    "bill": ("5258204546391351475", "üíµ"),
    "sparkle": ("5325547803936572038", "‚ú®"),
}

MENU_EMOJI_IDS = {k: v[0] for k, v in PREMIUM_EMOJI.items()}


def get_premium_emoji(key: str) -> str:
    """–Ñ–¥–∏–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø—Ä–µ–º—ñ—É–º-–µ–º–æ–¥–∑—ñ –≤ HTML-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö. key ‚Äî –∫–ª—é—á –∑ PREMIUM_EMOJI."""
    if key not in PREMIUM_EMOJI:
        return ""
    emoji_id, fallback = PREMIUM_EMOJI[key]
    return f'<tg-emoji emoji-id="{emoji_id}">{fallback}</tg-emoji>'


def get_calendar_emoji_html() -> str:
    """–ü—Ä–µ–º—ñ—É–º –µ–º–æ–¥–∑—ñ –∫–∞–ª–µ–Ω–¥–∞—Ä—è."""
    return get_premium_emoji("calendar")


def get_tv_emoji_html() -> str:
    """–ü—Ä–µ–º—ñ—É–º –µ–º–æ–¥–∑—ñ TV."""
    return get_premium_emoji("tv")


def get_person_emoji_html() -> str:
    """–ü—Ä–µ–º—ñ—É–º –µ–º–æ–¥–∑—ñ –ø–µ—Ä—Å–æ–Ω–∏/–∫–∞–±—ñ–Ω–µ—Ç—É (üë§)."""
    return get_premium_emoji("cabinet")


# --- –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –¥–∞—Ç (—î–¥–∏–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç DD.MM.YYYY —Å–∫—Ä—ñ–∑—å) ---

def format_date(value: str | None) -> str:
    """–ü–æ–≤–µ—Ä—Ç–∞—î –¥–∞—Ç—É —É –≤–∏–≥–ª—è–¥—ñ DD.MM.YYYY. value: 'YYYY-MM-DD' –∞–±–æ 'YYYY-MM-DD HH:MM:SS'. –Ø–∫—â–æ None/–ø–æ—Ä–æ–∂–Ω—î ‚Äî '‚Äî'."""
    if not value or not str(value).strip():
        return "‚Äî"
    s = str(value).strip()
    try:
        if " " in s:
            dt = datetime.strptime(s[:19], "%Y-%m-%d %H:%M:%S")
        else:
            dt = datetime.strptime(s[:10], "%Y-%m-%d")
        return dt.strftime("%d.%m.%Y")
    except (ValueError, TypeError):
        return s[:10] if len(s) >= 10 else s


def format_datetime(value: str | None) -> str:
    """–ü–æ–≤–µ—Ä—Ç–∞—î –¥–∞—Ç—É —ñ —á–∞—Å —É –≤–∏–≥–ª—è–¥—ñ DD.MM.YYYY –æ HH:MM. value: 'YYYY-MM-DD HH:MM:SS'. –Ø–∫—â–æ None/–ø–æ—Ä–æ–∂–Ω—î ‚Äî '‚Äî'."""
    if not value or not str(value).strip():
        return "‚Äî"
    s = str(value).strip()
    try:
        if " " in s:
            dt = datetime.strptime(s[:19], "%Y-%m-%d %H:%M:%S")
            return dt.strftime("%d.%m.%Y –æ %H:%M")
        dt = datetime.strptime(s[:10], "%Y-%m-%d")
        return dt.strftime("%d.%m.%Y")
    except (ValueError, TypeError):
        return s[:16] if len(s) >= 16 else (s[:10] if len(s) >= 10 else s)


def format_product_name_for_display(product_name: str | None, max_text_len: int = 30) -> str:
    """–î–ª—è —ñ—Å—Ç–æ—Ä—ñ—ó –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω—å: –∑–±–µ—Ä—ñ–≥–∞—î –ø—Ä–µ–º—ñ—É–º-–µ–º–æ–¥–∑—ñ –∑ –Ω–∞–∑–≤–∏ —Ç–æ–≤–∞—Ä—É (tg-emoji –∑ –ë–î), —Ä–µ—à—Ç—É –µ–∫—Ä–∞–Ω—É—î —Ç–∞ –æ–±—Ä—ñ–∑–∞—î."""
    if not product_name or not str(product_name).strip():
        return escape("‚Äî")
    s = str(product_name).strip()
    # –ü–æ–≤–Ω–∏–π —Ç–µ–≥ –Ω–∞ –ø–æ—á–∞—Ç–∫—É: <tg-emoji emoji-id="...">...</tg-emoji>
    match = re.match(r"^(<tg-emoji\s+emoji-id=\"[^\"]+\">[^<]*</tg-emoji>)\s*(.*)$", s, re.DOTALL)
    if match:
        tag_part, rest = match.groups()
        rest = (rest.strip() or "‚Äî")[:max_text_len]
        return tag_part + " " + escape(rest)
    # –ù–µ–º–∞—î –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ç–µ–≥—É ‚Äî –ø—Ä–∏–±–∏—Ä–∞—î–º–æ –±—É–¥—å-—è–∫—ñ —Ç–µ–≥–∏ (–æ–±—Ä—ñ–∑–∞–Ω—ñ —Ç–æ—â–æ), –µ–∫—Ä–∞–Ω—É—î–º–æ
    clean = (re.sub(r"<[^>]*>", "", s).strip() or "‚Äî")[:max_text_len]
    return escape(clean)


def get_greeting_message() -> str:
    return f"{get_premium_emoji('welcome')} –í—ñ—Ç–∞—î–º–æ –≤–∞—Å —É –º–∞–≥–∞–∑–∏–Ω—ñ –ø—ñ–¥–ø–∏—Å–æ–∫ <b>Flix Market</b>! –í –Ω–∞—Å –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–∏–¥–±–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫–∏ –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ –∑–∞ –∑–Ω–∏–∂–µ–Ω–æ—é —Ü—ñ–Ω–æ—é."
    
    
def get_about_text() -> str:
    return (f"""
{get_premium_emoji("about")} <b>–ü—Ä–æ –Ω–∞—Å</b>

<i>Flix Market ‚Äì —Ü–µ –Ω–∞–¥—ñ–π–Ω–∏–π –æ–Ω–ª–∞–π–Ω-–º–∞–≥–∞–∑–∏–Ω –ø—ñ–¥–ø–∏—Å–æ–∫, —è–∫–∏–π –ø—Ä–æ–ø–æ–Ω—É—î –¥–æ—Å—Ç—É–ø –¥–æ –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ –∑–∞ –∑–Ω–∏–∂–µ–Ω–∏–º–∏ —Ü—ñ–Ω–∞–º–∏. –ú–∏ –ø—Ä–∞—Ü—é—î–º–æ –∑ 2021 —Ä–æ–∫—É —Ç–∞ –≤–∂–µ –¥–æ–ø–æ–º–æ–≥–ª–∏ —Ç–∏—Å—è—á–∞–º –∫–ª—ñ—î–Ω—Ç—ñ–≤ –æ—Ç—Ä–∏–º–∞—Ç–∏ —É–ª—é–±–ª–µ–Ω—ñ –ø—ñ–¥–ø–∏—Å–∫–∏ —à–≤–∏–¥–∫–æ, –≤–∏–≥—ñ–¥–Ω–æ —Ç–∞ –±–µ–∑–ø–µ—á–Ω–æ.

–ù–∞—à–∞ –º–µ—Ç–∞ ‚Äì –∑—Ä–æ–±–∏—Ç–∏ —è–∫—ñ—Å–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–Ω—ñ—à–∏–º. –£ –Ω–∞—Å –≤–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫—ñ–Ω–æ —Ç–∞ —Ç–µ–ª–µ–±–∞—á–µ–Ω–Ω—è, –º—É–∑–∏–∫—É, VPN-—Å–µ—Ä–≤—ñ—Å–∏ —Ç–∞ —ñ–Ω—à—ñ –∫–æ—Ä–∏—Å–Ω—ñ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏. –ú–∏ –≥–∞—Ä–∞–Ω—Ç—É—î–º–æ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è, –ø—ñ–¥—Ç—Ä–∏–º–∫—É –Ω–∞ –≤—Å—ñ—Ö –µ—Ç–∞–ø–∞—Ö —Ç–∞ –∑—Ä—É—á–Ω—ñ —Å–ø–æ—Å–æ–±–∏ –æ–ø–ª–∞—Ç–∏.

–ü—Ä–∞—Ü—é—î–º–æ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ, –º–∞—î–º–æ –º–∞–≥–∞–∑–∏–Ω –Ω–∞ Prom.ua, –∞ –Ω–∞—à–∞ —Å–ø—ñ–ª—å–Ω–æ—Ç–∞ –≤ Telegram –Ω–∞–ª—ñ—á—É—î –ø–æ–Ω–∞–¥ 5000 –∑–∞–¥–æ–≤–æ–ª–µ–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤. –ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ –Ω–∞—Å —Ç–∞ –∫–æ—Ä–∏—Å—Ç—É–π—Ç–µ—Å—è —É–ª—é–±–ª–µ–Ω–∏–º–∏ —Å–µ—Ä–≤—ñ—Å–∞–º–∏ –±–µ–∑ –ø–µ—Ä–µ–ø–ª–∞—Ç!</i>
    """
)


def get_faq_text() -> str:
    return (
    f"""
{get_premium_emoji("faq")} <b>–ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ</b>

<b>‚Ä¢ –Ø–∫—ñ –≥–∞—Ä–∞–Ω—Ç—ñ—ó, —â–æ –≤–∏ –º–µ–Ω–µ –Ω–µ –æ–±–º–∞–Ω–µ—Ç–µ?</b>

<i>–ú–∏ –ø—Ä–∞—Ü—é—î–º–æ –∑ 2021 —Ä–æ–∫—É —Ç–∞ –∑–∞—Å–ª—É–∂–∏–ª–∏ –¥–æ–≤—ñ—Ä—É —Ç–∏—Å—è—á –∫–ª—ñ—î–Ω—Ç—ñ–≤. –ù–∞—à–∞ Telegram-–≥—Ä—É–ø–∞ –Ω–∞–ª—ñ—á—É—î –ø–æ–Ω–∞–¥ 5000 –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤, –∞ —Ç–∞–∫–æ–∂ –º–∏ –º–∞—î–º–æ –≤–µ–ª–∏–∫—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–∑–∏—Ç–∏–≤–Ω–∏—Ö –≤—ñ–¥–≥—É–∫—ñ–≤ –ø—Ä–æ –Ω–∞—à—É —Ä–æ–±–æ—Ç—É (–ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≥—Ä—É–ø—É –∑ –≤—ñ–¥–≥—É–∫–∞–º–∏ —Ç–∞ –∫–∞–Ω–∞–ª ‚Äì –Ω–∏–∂—á–µ). –û–∫—Ä—ñ–º —Ü—å–æ–≥–æ, —É –Ω–∞—Å —î –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –º–∞–≥–∞–∑–∏–Ω –Ω–∞ Prom.ua, —ñ –º–∏ –ø—Ä–∞—Ü—é—î–º–æ –ª–µ–≥–∞–ª—å–Ω–æ, —Å–ø–ª–∞—á—É—é—á–∏ –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –ø–æ–¥–∞—Ç–∫–∏. –í–∞—à–µ –∑–∞–¥–æ–≤–æ–ª–µ–Ω–Ω—è —Ç–∞ –±–µ–∑–ø–µ–∫–∞ ‚Äì –Ω–∞—à –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç!</i>

<a href="https://t.me/FLIX_vidgyki">–í—ñ–¥–≥—É–∫–∏</a>

<a href="https://t.me/+N99gG8vIUYVkNGJi">–ö–∞–Ω–∞–ª</a>

<b>‚Ä¢ –Ø–∫ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É?</b>

<i>–í–∏ –æ–±–∏—Ä–∞—î—Ç–µ –ø—ñ–¥–ø–∏—Å–∫—É, –æ–ø–ª–∞—á—É—î—Ç–µ —ó—ó, —ñ –Ω–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä –∑–≤'—è–∑—É—î—Ç—å—Å—è –∑ –≤–∞–º–∏ –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è.(–∑–∞–∑–≤–∏—á–∞–π —Ü–µ –¥—É—É—É–∂–µ —à–≤–∏–¥–∫–æ)</i>

<b>‚Ä¢ –Ø–∫—ñ —Å–ø–æ—Å–æ–±–∏ –æ–ø–ª–∞—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ?</b>

<i>(–í–∏ –º–æ–∂–µ—Ç–µ –æ–ø–ª–∞—Ç–∏—Ç–∏ –∫–∞—Ä—Ç–∫–æ—é –ø—Ä—è–º–æ –≤ –Ω–∞—à–æ–º—É –±–æ—Ç—ñ(Apple pay/google pay), –ó–∞ –∑–∞–ø–∏—Ç–æ–º –≤ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –º–æ–∂–Ω–∞ –æ–ø–ª–∞—Ç–∏—Ç–∏ —á–µ—Ä–µ–∑ PayPal, Revolut –∞–±–æ –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ—é)</i>

<b>‚Ä¢ –Ø–∫ —à–≤–∏–¥–∫–æ —è –æ—Ç—Ä–∏–º–∞—é –ø—ñ–¥–ø–∏—Å–∫—É –ø—ñ—Å–ª—è –æ–ø–ª–∞—Ç–∏?</b>

<i>–ó–∞–∑–≤–∏—á–∞–π –ø—Ä–æ—Ç—è–≥–æ–º 10-15 —Ö–≤, –∞–ª–µ –≤ –¥–µ—è–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö —Ü–µ –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ —Ç—Ä–æ—Ö–∏ –±—ñ–ª—å—à–µ —á–∞—Å—É(—è–∫—â–æ —Ü–µ –Ω–µ —Ä–æ–±–æ—á–∏–π —á–∞—Å –∞–±–æ –≤–µ–ª–∏–∫–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è)</i>

<b>‚Ä¢ –ß–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É –Ω–∞ –∫—ñ–ª—å–∫–æ—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö?</b>

<i>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ –≤–∫–∞–∑–∞–Ω–∞ –≤ –æ–ø–∏—Å—ñ –∫–æ–∂–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä—É</i>

<b>‚Ä¢ –©–æ —Ä–æ–±–∏—Ç–∏, —è–∫—â–æ –ø—ñ–¥–ø–∏—Å–∫–∞ –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏?</b>

<i>–ù–∞–ø–∏—à—ñ—Ç—å —É –ø—ñ–¥—Ç—Ä–∏–º–∫—É, —ñ –º–∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ –≤–∏—Ä—ñ—à–∏–º–æ –ø—Ä–æ–±–ª–µ–º—É. 
–ö–æ–Ω—Ç–∞–∫—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏: telegram @kinomanage , viber 0954638612</i>

<b>‚Ä¢ –ß–∏ —î –≥–∞—Ä–∞–Ω—Ç—ñ—è –Ω–∞ –ø—ñ–¥–ø–∏—Å–∫—É?</b>

<i>–¢–∞–∫, –≥–∞—Ä–∞–Ω—Ç—ñ—è –¥—ñ—î –ø—Ä–æ—Ç—è–≥–æ–º —É—Å—å–æ–≥–æ —Ç–µ—Ä–º—ñ–Ω—É –ø—ñ–¥–ø–∏—Å–∫–∏.</i>

<b>‚Ä¢ –Ø–∫ –∑–≤'—è–∑–∞—Ç–∏—Å—è –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é?</b>

<i>–ù–∞–ø–∏—à—ñ—Ç—å –Ω–∞–º —É telegram @kinomanage , viber 0954638612</i>
    """
    )
    

def get_help_text() -> str:
    return """
<b>üîç –Ø–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è –±–æ—Ç–æ–º:</b>

1Ô∏è‚É£ –û–±–µ—Ä—ñ—Ç—å –ø—Ä–æ–¥—É–∫—Ç —É –∫–∞—Ç–∞–ª–æ–∑—ñ
2Ô∏è‚É£ –í–∏–±–µ—Ä—ñ—Ç—å –∑—Ä—É—á–Ω–∏–π —Ç–∞—Ä–∏—Ñ
3Ô∏è‚É£ –û–ø–ª–∞—Ç—ñ—Ç—å –ø—ñ–¥–ø–∏—Å–∫—É
4Ô∏è‚É£ –û—Ç—Ä–∏–º–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø —Ç–∞ –Ω–∞—Å–æ–ª–æ–¥–∂—É–π—Ç–µ—Å—å!

<b>‚ùì –í–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è?</b>
–ó–≤'—è–∂—ñ—Ç—å—Å—è –∑ –Ω–∞—à–æ—é –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é: @support_username

<b>üéÅ –ü—Ä–∏—î–º–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞–Ω–Ω—è!</b>
"""


def get_manager_text() -> str:
    return f"""
{get_premium_emoji("support")} <b>–ó–≤'—è–∂—ñ—Ç—å—Å—è –∑ –Ω–∞—à–∏–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º</b>

–Ø–∫—â–æ —É –≤–∞—Å –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è, –Ω–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≤–∂–¥–∏ –≥–æ—Ç–æ–≤–∏–π –¥–æ–ø–æ–º–æ–≥—Ç–∏. üìû
"""

mailing_text = (
    "<b>–°–¢–í–û–†–ï–ù–ù–Ø –ü–û–°–¢–£:</b>\n\n"
    "–¶—è —Ñ—É–Ω–∫—Ü—ñ—è –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ—Å—Ç —ñ —Ä–æ–∑—ñ—Å–ª–∞—Ç–∏ –π–æ–≥–æ –≤—Å—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –±–æ—Ç–∞. "
    "–í–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ —Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –≤—ñ–¥–µ–æ –∞–±–æ –¥–æ–∫—É–º–µ–Ω—Ç, –∞ —Ç–∞–∫–æ–∂ URL-–∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∑–æ–≤–Ω—ñ—à–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏. "
    "–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Å—Ç–∞, –≤–∏ –∑–º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –π–æ–≥–æ —ñ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ —Ä–æ–∑—Å–∏–ª–∫—É.\n\n"
    "–ö—Ä–æ–∫–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Å—Ç–∞:\n"
    "1. –ù–∞–¥—ñ—à–ª—ñ—Ç—å —Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –≤—ñ–¥–µ–æ –∞–±–æ –¥–æ–∫—É–º–µ–Ω—Ç, —è–∫–∏–π –≤–∏ —Ö–æ—á–µ—Ç–µ —Ä–æ–∑—ñ—Å–ª–∞—Ç–∏.\n"
    "2. –î–æ–¥–∞–π—Ç–µ –æ–ø–∏—Å, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ.\n"
    "3. –î–æ–¥–∞–π—Ç–µ URL-–∫–Ω–æ–ø–∫–∏, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ.\n"
    "4. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ø–æ—Å—Ç —ñ –ø—ñ–¥—Ç–≤–µ—Ä–¥—å—Ç–µ —Ä–æ–∑—Å–∏–ª–∫—É.\n\n"
    "–ü—ñ—Å–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Ä–æ–∑—Å–∏–ª–∫–∏, –ø–æ—Å—Ç –±—É–¥–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –±–æ—Ç–∞."
    )

def get_referral_text(
    bot_name: str,
    user_id: int,
    referral_count: int,
    balance: float = 0,
    percent: float = 20,
) -> str:
    return (
        f"{get_premium_emoji('referral')} <b>–ü–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–∞</b>\n\n"
        f"<b>{get_premium_emoji('money')} –í–∞—à –±–∞–ª–∞–Ω—Å:</b> {balance:.2f} ‚Ç¥\n"
        f"<b>{get_premium_emoji('people')} –ó–∞–ø—Ä–æ—à–µ–Ω–æ –ª—é–¥–µ–π:</b> {referral_count}\n"
        f"<b>{get_premium_emoji('chart')} –í—ñ–¥—Å–æ—Ç–æ–∫ –∑ –ø–æ–∫—É–ø–æ–∫:</b> {percent:.0f}%\n\n"
        "<b>–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:</b>\n"
        "1. –ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –∑ –¥—Ä—É–∑—è–º–∏.\n"
        "2. –ö–æ–ª–∏ –≤–æ–Ω–∏ –∫—É–ø—É—é—Ç—å –ø—ñ–¥–ø–∏—Å–∫—É ‚Äî –≤–∞–º –Ω–∞—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è % –≤—ñ–¥ —Å—É–º–∏ –ø–æ–∫—É–ø–∫–∏ –Ω–∞ –±–∞–ª–∞–Ω—Å.\n"
        "3. –ù–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –∑ –∫–æ–∂–Ω–æ—ó –ø–æ–∫—É–ø–∫–∏ –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—à–µ–Ω–æ–≥–æ, –ø–æ—Å—Ç—ñ–π–Ω–æ.\n"
        "4. –ë–∞–ª–∞–Ω—Å –º–æ–∂–Ω–∞ –≤–∏—Ç—Ä–∞—Ç–∏—Ç–∏ –Ω–∞ –ø—ñ–¥–ø–∏—Å–∫–∏ –∞–±–æ –∑–∞–ø—Ä–æ—Å–∏—Ç–∏ –≤–∏–≤—ñ–¥.\n\n"
        f"<b>–í–∞—à–µ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:</b>\n"
        f"<code>https://t.me/{bot_name}?start={user_id}</code>"
    )

def get_contest_text(bot_name: str, user_id: int, invited_count: int) -> str:
    return (
        "<b>üèÜ –ö–æ–Ω–∫—É—Ä—Å –Ω–∞ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—ñ –ø—ñ–¥–ø–∏—Å–∫–∏!</b>\n\n"
        "–ó–∞–ø—Ä–æ—à—É–π—Ç–µ –¥—Ä—É–∑—ñ–≤ —Ç–∞ –æ—Ç—Ä–∏–º—É–π—Ç–µ —à–∞–Ω—Å–∏ –≤–∏–≥—Ä–∞—Ç–∏ –∫—Ä—É—Ç—ñ –ø—Ä–∏–∑–∏!\n\n"
        f"<b>{get_premium_emoji('people')} –í–∏ –∑–∞–ø—Ä–æ—Å–∏–ª–∏:</b> {invited_count} –¥—Ä—É–∑—ñ–≤\n"
        f"<b>üé≤ –í–∞—à—ñ —à–∞–Ω—Å–∏ –Ω–∞ –ø–µ—Ä–µ–º–æ–≥—É:</b> {invited_count}\n\n"
        "<b>–£–º–æ–≤–∏ —É—á–∞—Å—Ç—ñ:</b>\n"
        "‚Ä¢ –ó–∞–ø—Ä–æ—Å—ñ—Ç—å –¥—Ä—É–≥–∞ –∑–∞ —Ü–∏–º –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º\n"
        "‚Ä¢ –í–∞—à –¥—Ä—É–≥ –º–∞—î –ª–∏—à–µ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è\n"
        "‚Ä¢ –ó–∞ –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—à–µ–Ω–æ–≥–æ –¥—Ä—É–≥–∞ –≤–∏ –æ—Ç—Ä–∏–º—É—î—Ç–µ +1 —à–∞–Ω—Å –Ω–∞ –≤–∏–≥—Ä–∞—à\n\n"
        "<b>üéÅ –ü—Ä–∏–∑–∏:</b>\n"
        "1Ô∏è‚É£ –º—ñ—Å—Ü–µ: Netflix + SWEET.TV –Ω–∞ —Ä—ñ–∫ (1 –ø—Ä–∏—Å—Ç—Ä—ñ–π)\n"
        "2Ô∏è‚É£ –º—ñ—Å—Ü–µ: Spotify Premium –Ω–∞ —Ä—ñ–∫\n" 
        "3Ô∏è‚É£ –º—ñ—Å—Ü–µ: SWEET.TV –Ω–∞ —Ä—ñ–∫ (1 –ø—Ä–∏—Å—Ç—Ä—ñ–π)\n"
        "4Ô∏è‚É£ –º—ñ—Å—Ü–µ: SWEET.TV –Ω–∞ 6 –º—ñ—Å—è—Ü—ñ–≤ (1 –ø—Ä–∏—Å—Ç—Ä—ñ–π)\n"
        "5Ô∏è‚É£ –º—ñ—Å—Ü–µ: –ü—Ä–æ–º–æ–∫–æ–¥ SWEET.TV –Ω–∞ 1 –º—ñ—Å—è—Ü—å\n\n"
        "<b>–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:</b>\n"
        "1. –ß–∏–º –±—ñ–ª—å—à–µ –¥—Ä—É–∑—ñ–≤ –≤–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç–µ, —Ç–∏–º –±—ñ–ª—å—à–µ —à–∞–Ω—Å—ñ–≤ –≤–∏–≥—Ä–∞—Ç–∏\n"
        "2. –ü–µ—Ä–µ–º–æ–∂—Ü—ñ–≤ –±—É–¥–µ –æ–±—Ä–∞–Ω–æ –≤–∏–ø–∞–¥–∫–æ–≤–∏–º —á–∏–Ω–æ–º —Å–µ—Ä–µ–¥ —É—Å—ñ—Ö —É—á–∞—Å–Ω–∏–∫—ñ–≤\n"
        "3. –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∞—à–∏—Ö —à–∞–Ω—Å—ñ–≤ = –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–ø—Ä–æ—à–µ–Ω–∏—Ö –¥—Ä—É–∑—ñ–≤\n\n"
        f"<b>–í–∞—à–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è —É—á–∞—Å—Ç—ñ:</b>\n<code>https://t.me/{bot_name}?start=Eve12nt145Q_{user_id}</code>\n\n"
        "üéØ <b>–ù–µ –≤—Ç—Ä–∞—á–∞–π—Ç–µ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å! –ó–∞–ø—Ä–æ—à—É–π—Ç–µ –¥—Ä—É–∑—ñ–≤ —Ç–∞ –≤–∏–≥—Ä–∞–≤–∞–π—Ç–µ –∫—Ä—É—Ç—ñ –ø—Ä–∏–∑–∏!</b>"
    )


"""–¢–µ–∫—Å—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è –ø–ª–∞—Ç–µ–∂—ñ–≤ —Ç–∞ –ø—ñ–¥–ø–∏—Å–æ–∫ (–∞–¥–º—ñ–Ω, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á, –ø–∞—Ä—Ç–Ω–µ—Ä)."""

from Content.texts import get_calendar_emoji_html, get_premium_emoji


def format_admin_user_line(user_id: int, username: str | None) -> str:
    """–†—è–¥–æ–∫ '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: ...' –¥–ª—è –∞–¥–º—ñ–Ω-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å. –û–±—Ä–æ–±–ª—è—î –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å."""
    if username and str(username).strip():
        return f"–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: @{username} (ID: <code>{user_id}</code>)"
    return f"–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: ID <code>{user_id}</code> (–ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å)"


def format_admin_referral_line(
    ref_id: int | None, ref_username: str | None, credit_amount: float
) -> str:
    """–†—è–¥–æ–∫ –ø—Ä–æ –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è —Ä–µ—Ñ–µ—Ä–∞–ª—É –¥–ª—è –∞–¥–º—ñ–Ω-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å. –í–∫–∞–∑—É—î, —è–∫–æ–º—É —Ä–µ—Ñ–µ—Ä–∞–ª—É –Ω–∞—Ä–∞—Ö–æ–≤–∞–Ω–æ."""
    if not ref_id or credit_amount <= 0:
        return ""
    ref_display = (
        f"@{ref_username} (ID: <code>{ref_id}</code>)"
        if ref_username and str(ref_username).strip()
        else f"ID <code>{ref_id}</code> (–ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å)"
    )
    return f"\n{get_premium_emoji('sparkle')} –†–µ—Ñ–µ—Ä–∞–ª—É {ref_display} –Ω–∞—Ä–∞—Ö–æ–≤–∞–Ω–æ: <b>{credit_amount:.2f} ‚Ç¥</b>"


def _months_word(months: int) -> str:
    if months == 1:
        return "–º—ñ—Å—è—Ü—å"
    if months in (2, 3, 4):
        return "–º—ñ—Å—è—Ü—ñ"
    return "–º—ñ—Å—è—Ü—ñ–≤"


# --- –ü–∞—Ä—Ç–Ω–µ—Ä ---


def get_partner_referral_purchase_text(
    buyer_display: str, product_name: str, amount: float, credit_amount: float
) -> str:
    """–¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–∞—Ä—Ç–Ω–µ—Ä—É –ø—Ä–æ –ø–æ–∫—É–ø–∫—É —Ä–µ—Ñ–µ—Ä–∞–ª–∞."""
    return (
        f"{get_premium_emoji('money')} <b>–í–∞—à —Ä–µ—Ñ–µ—Ä–∞–ª</b> {buyer_display} –∑–¥—ñ–π—Å–Ω–∏–≤ –ø–æ–∫—É–ø–∫—É!\n\n"
        f"{get_premium_emoji('box')} –¢–æ–≤–∞—Ä: <b>{product_name}</b>\n"
        f"{get_premium_emoji('bill')} –°—É–º–∞ –ø–æ–∫—É–ø–∫–∏: {amount:.2f} ‚Ç¥\n"
        f"{get_premium_emoji('sparkle')} –í–∞–º –Ω–∞—Ä–∞—Ö–æ–≤–∞–Ω–æ: <b>{credit_amount:.2f} ‚Ç¥</b>"
    )


# --- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á ---


def get_user_subscription_success_text(
    product_name: str, months: int, amount: float, card_info: str | None = None
) -> str:
    """–¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –ø—Ä–æ —É—Å–ø—ñ—à–Ω–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏ (–∑ –∞–≤—Ç–æ—Å–ø–∏—Å–∞–Ω–Ω—è–º)."""
    cal = get_calendar_emoji_html()
    m = _months_word(months)
    text = (
        f"{get_premium_emoji('check')} <b>–ü—ñ–¥–ø–∏—Å–∫–∞ —É—Å–ø—ñ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞!</b>\n\n"
        f"‚Ä¢ –ü—ñ–¥–ø–∏—Å–∫–∞: {product_name}\n"
        f"‚Ä¢ –¢–µ—Ä–º—ñ–Ω: {months} {m}\n"
        f"‚Ä¢ –°—É–º–∞: {amount} UAH\n\n"
        f"{cal} <b>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å–ø–∏—Å–∞–Ω–Ω—è:</b> –∫–æ–∂–Ω—ñ {months} {m}\n"
    )
    if card_info:
        text += f"{card_info}\n\n"
    text += (
        "–ó–∞—á–µ–∫–∞–π—Ç–µ –ø–æ–∫–∏ –∑ –≤–∞–º–∏ –∑–≤'—è–∂–µ—Ç—å—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏\n\n"
        f"{get_premium_emoji('bell')} <b>–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –æ–Ω–æ–≤–ª–µ–Ω—å –ø—ñ–¥–ø–∏—à—ñ—Ç—å—Å—è –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª:</b>\n"
    )
    return text


def get_user_subscription_token_not_found_text(product_name: str, months: int, amount: float) -> str:
    """–¢–µ–∫—Å—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É: –æ–ø–ª–∞—Ç–∞ –ø—Ä–æ–π—à–ª–∞, –∞–ª–µ –Ω–µ –≤–¥–∞–ª–æ—Å—è –∑–±–µ—Ä–µ–≥—Ç–∏ –¥–∞–Ω—ñ –∫–∞—Ä—Ç–∫–∏ –¥–ª—è –∞–≤—Ç–æ—Å–ø–∏—Å–∞–Ω–Ω—è (–ø—ñ—Å–ª—è –∫—ñ–ª—å–∫–æ—Ö —Å–ø—Ä–æ–±)."""
    m = _months_word(months)
    return (
        f"{get_premium_emoji('check')} <b>–û–ø–ª–∞—Ç–∞ –ø—Ä–æ–π—à–ª–∞ —É—Å–ø—ñ—à–Ω–æ</b>\n\n"
        f"‚Ä¢ –ü—ñ–¥–ø–∏—Å–∫–∞: {product_name}\n"
        f"‚Ä¢ –¢–µ—Ä–º—ñ–Ω: {months} {m}\n"
        f"‚Ä¢ –°—É–º–∞: {amount} UAH\n\n"
        f"‚ö†Ô∏è <b>–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–±–µ—Ä–µ–≥—Ç–∏ –¥–∞–Ω—ñ –∫–∞—Ä—Ç–∫–∏</b> –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è (–æ–±–º–µ–∂–µ–Ω–Ω—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ –∞–±–æ –∑–∞—Ç—Ä–∏–º–∫–∞ –¥–∞–Ω–∏—Ö).\n\n"
        f"–î–ª—è –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏ –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞."
    )


def get_user_one_time_success_text(product_name: str, months: int, amount: float) -> str:
    """–¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –ø—Ä–æ —É—Å–ø—ñ—à–Ω—É –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—É –æ–ø–ª–∞—Ç—É."""
    m = _months_word(months)
    return (
        f"{get_premium_emoji('check')} <b>–û–ø–ª–∞—Ç–∞ —É—Å–ø—ñ—à–Ω–∞!</b>\n\n"
        f"‚Ä¢ –ü—ñ–¥–ø–∏—Å–∫–∞: {product_name}\n"
        f"‚Ä¢ –¢–µ—Ä–º—ñ–Ω: {months} {m}\n"
        f"‚Ä¢ –°—É–º–∞: {amount} UAH\n\n"
        f"{get_premium_emoji('card')} <b>–û–¥–Ω–æ—Ä–∞–∑–æ–≤–∞ –æ–ø–ª–∞—Ç–∞</b>\n\n"
        f"–ó–∞—á–µ–∫–∞–π—Ç–µ –ø–æ–∫–∏ –∑ –≤–∞–º–∏ –∑–≤'—è–∂–µ—Ç—å—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏\n\n"
        f"{get_premium_emoji('bell')} <b>–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –æ–Ω–æ–≤–ª–µ–Ω—å –ø—ñ–¥–ø–∏—à—ñ—Ç—å—Å—è –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª:</b>\n"
    )


def get_user_contact_manager_text(payment_id: str) -> str:
    """–¢–µ–∫—Å—Ç ¬´–Ω–∞–ø–∏—à—ñ—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É¬ª –ø—ñ—Å–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏."""
    return (
        f"üìù <b>–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ –ø—ñ–¥–ø–∏—Å–∫–∏ –Ω–∞–ø–∏—à—ñ—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É:</b>\n"
        f"‚Ä¢ –í–∫–∞–∑–∞–≤—à–∏ ID –ø–ª–∞—Ç–µ–∂—É: <code>{payment_id}</code>\n"
        f"‚Ä¢ –ê–±–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞–≤—à–∏ –ø—Ä–æ –∫—É–ø–ª–µ–Ω—É –ø—ñ–¥–ø–∏—Å–∫—É\n\n"
        f"{get_premium_emoji('bell')} <b>–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –æ–Ω–æ–≤–ª–µ–Ω—å –ø—ñ–¥–ø–∏—à—ñ—Ç—å—Å—è –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª:</b>"
    )


# --- –ê–¥–º—ñ–Ω ---


def get_admin_new_subscription_text(
    payment_id: str,
    user_id: int,
    username: str | None,
    product_name: str,
    amount: float,
    months: int,
    ref_id: int | None,
    ref_username: str | None,
    credit_amount: float,
) -> str:
    """–¢–µ–∫—Å—Ç –∞–¥–º—ñ–Ω-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ¬´–ù–æ–≤–∞ –ø—ñ–¥–ø–∏—Å–∫–∞!¬ª."""
    cal = get_calendar_emoji_html()
    m = _months_word(months)
    return (
        f"{get_premium_emoji('money')} <b>–ù–æ–≤–∞ –ø—ñ–¥–ø–∏—Å–∫–∞!</b>\n\n"
        f"ID –ø–ª–∞—Ç–µ–∂—É: <code>{payment_id}</code>\n"
        f"–¢–∏–ø: {cal} –ü—ñ–¥–ø–∏—Å–∫–∞\n"
        f"{format_admin_user_line(user_id, username)}\n"
        f"–¢–æ–≤–∞—Ä: {product_name}\n"
        f"–°—É–º–∞: {amount} UAH\n"
        f"–¢–µ—Ä–º—ñ–Ω: {months} {m}"
        f"{format_admin_referral_line(ref_id, ref_username, credit_amount)}"
    )


def get_admin_new_one_time_text(
    invoice_id: str,
    user_id: int,
    username: str | None,
    product_name: str,
    amount: float,
    months: int,
    end_date_str: str,
    ref_id: int | None,
    ref_username: str | None,
    credit_amount: float,
) -> str:
    """–¢–µ–∫—Å—Ç –∞–¥–º—ñ–Ω-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ¬´–ù–æ–≤–∞ –æ–ø–ª–∞—Ç–∞!¬ª (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞)."""
    return (
        f"{get_premium_emoji('money')} <b>–ù–æ–≤–∞ –æ–ø–ª–∞—Ç–∞!</b>\n\n"
        f"ID –ø–ª–∞—Ç–µ–∂—É: <code>{invoice_id}</code>\n"
        f"–¢–∏–ø: {get_premium_emoji('card')} –û–¥–Ω–æ—Ä–∞–∑–æ–≤–∞ –æ–ø–ª–∞—Ç–∞\n"
        f"{format_admin_user_line(user_id, username)}\n"
        f"–¢–æ–≤–∞—Ä: {product_name}\n"
        f"–°—É–º–∞: {amount} UAH\n"
        f"–¢–µ—Ä–º—ñ–Ω: {months} –º—ñ—Å.\n"
        f"–ê–∫—Ç–∏–≤–Ω–∞ –¥–æ: {end_date_str}"
        f"{format_admin_referral_line(ref_id, ref_username, credit_amount)}"
    )


# --- –ê–≤—Ç–æ-–ø–ª–∞—Ç–µ–∂—ñ (cron) ---


def get_user_auto_payment_success_text(
    product_name: str, amount: float, months: int, next_date_str: str
) -> str:
    """–¢–µ–∫—Å—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–ª–∞—Ç—ñ–∂ —É—Å–ø—ñ—à–Ω–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ."""
    m = _months_word(months)
    return (
        f"{get_premium_emoji('check')} <b>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–ª–∞—Ç—ñ–∂ —É—Å–ø—ñ—à–Ω–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ</b>\n\n"
        f"–ü—ñ–¥–ø–∏—Å–∫–∞: <b>{product_name}</b>\n"
        f"–°—É–º–∞: <b>{amount}‚Ç¥</b>\n"
        f"–ü–µ—Ä—ñ–æ–¥: <b>{months} {m}</b>\n\n"
        f"–î–∞—Ç–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Å–ø–∏—Å–∞–Ω–Ω—è: <b>{next_date_str}</b>"
    )


def get_admin_auto_payment_success_text(
    user_id: int,
    username: str | None,
    product_name: str,
    amount: float,
    months: int,
    next_date_str: str,
    invoice_info: str,
    card_info: str,
    token_info: str,
) -> str:
    """–¢–µ–∫—Å—Ç –∞–¥–º—ñ–Ω—É: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–ª–∞—Ç—ñ–∂ —É—Å–ø—ñ—à–Ω–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ."""
    m = _months_word(months)
    return (
        f"üîÑ <b>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–ª–∞—Ç—ñ–∂ —É—Å–ø—ñ—à–Ω–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ</b>\n\n"
        f"{format_admin_user_line(user_id, username)}\n"
        f"–ü—ñ–¥–ø–∏—Å–∫–∞: <b>{product_name}</b>\n"
        f"–°—É–º–∞: <b>{amount}‚Ç¥</b>\n"
        f"–ü–µ—Ä—ñ–æ–¥: <b>{months} {m}</b>\n"
        f"–ù–∞—Å—Ç—É–ø–Ω–µ —Å–ø–∏—Å–∞–Ω–Ω—è: <b>{next_date_str}</b>\n\n"
        f"{invoice_info}"
        f"{card_info}"
        f"{token_info}"
    )


def get_user_auto_payment_failed_text(product_name: str, masked_card: str) -> str:
    """–¢–µ–∫—Å—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É: –Ω–µ –≤–¥–∞–ª–æ—Å—è –ø—Ä–æ–≤–µ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–ª–∞—Ç—ñ–∂."""
    return (
        f"‚ùå <b>–ù–µ –≤–¥–∞–ª–æ—Å—è –ø—Ä–æ–≤–µ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–ª–∞—Ç—ñ–∂</b>\n\n"
        f"–ü—ñ–¥–ø–∏—Å–∫–∞: <b>{product_name}</b>\n"
        f"–ö–∞—Ä—Ç–∫–∞: <b>{masked_card}</b>\n\n"
        f"–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:\n"
        f"‚Ä¢ –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫–æ—à—Ç—ñ–≤ –Ω–∞ –∫–∞—Ä—Ç—Ü—ñ\n"
        f"‚Ä¢ –ö–∞—Ä—Ç–∫–∞ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∞\n"
        f"‚Ä¢ –¢–µ—Ö–Ω—ñ—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞\n\n"
        f"–ú–∏ —Å–ø—Ä–æ–±—É—î–º–æ —â–µ —Ä–∞–∑ —á–µ—Ä–µ–∑ –¥–µ—è–∫–∏–π —á–∞—Å. –Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å—Å—è, –ø—ñ–¥–ø–∏—Å–∫–∞ –±—É–¥–µ —Å–∫–∞—Å–æ–≤–∞–Ω–∞."
    )


def get_admin_auto_payment_failed_text(
    user_id: int,
    username: str | None,
    product_name: str,
    masked_card: str,
    invoice_info: str,
    token_info: str,
    reason_info: str,
) -> str:
    """–¢–µ–∫—Å—Ç –∞–¥–º—ñ–Ω—É: –Ω–µ–≤–¥–∞–ª–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–ª–∞—Ç—ñ–∂."""
    return (
        f"‚ùå <b>–ù–µ–≤–¥–∞–ª–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–ª–∞—Ç—ñ–∂</b>\n\n"
        f"{format_admin_user_line(user_id, username)}\n"
        f"–ü—ñ–¥–ø–∏—Å–∫–∞: <b>{product_name}</b>\n"
        f"–ö–∞—Ä—Ç–∫–∞: <b>{masked_card}</b>\n\n"
        f"{invoice_info}"
        f"{token_info}"
        f"{reason_info}"
        f"‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞–Ω –ø—ñ–¥–ø–∏—Å–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞"
    )


def get_user_token_invalid_text(product_name: str, masked_card: str) -> str:
    """–¢–µ–∫—Å—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É: –ø—Ä–æ–±–ª–µ–º–∞ –∑ –∫–∞—Ä—Ç–∫–æ—é / –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π —Ç–æ–∫–µ–Ω."""
    return (
        f"‚ùå <b>–ü—Ä–æ–±–ª–µ–º–∞ –∑ –∫–∞—Ä—Ç–∫–æ—é –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂—É</b>\n\n"
        f"–ü—ñ–¥–ø–∏—Å–∫–∞: <b>{product_name}</b>\n"
        f"–ö–∞—Ä—Ç–∫–∞: <b>{masked_card}</b>\n\n"
        f"‚ö†Ô∏è <b>–ü—Ä–æ–±–ª–µ–º–∞:</b> –¢–æ–∫–µ–Ω –∫–∞—Ä—Ç–∫–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∞–±–æ –∑–∞—Å—Ç–∞—Ä—ñ–≤.\n\n"
        f"–î–ª—è –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö –ø–ª–∞—Ç–µ–∂—ñ–≤ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ:\n"
        f"1. –û—Ñ–æ—Ä–º–∏—Ç–∏ –Ω–æ–≤—É –ø—ñ–¥–ø–∏—Å–∫—É\n"
        f"2. –ü—Ä–∏ –æ–ø–ª–∞—Ç—ñ –∑–±–µ—Ä–µ–≥—Ç–∏ –Ω–æ–≤—É –∫–∞—Ä—Ç–∫—É\n\n"
        f"–°—Ç–∞—Ä–∞ –ø—ñ–¥–ø–∏—Å–∫–∞ –±—É–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–∞—Å–æ–≤–∞–Ω–∞."
    )


def get_admin_token_invalid_text(
    user_id: int,
    username: str | None,
    product_name: str,
    masked_card: str,
    error_text: str,
) -> str:
    """–¢–µ–∫—Å—Ç –∞–¥–º—ñ–Ω—É: –ø—ñ–¥–ø–∏—Å–∫–∞ —Å–∫–∞—Å–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π —Ç–æ–∫–µ–Ω."""
    return (
        f"üî¥ <b>–ü—ñ–¥–ø–∏—Å–∫–∞ —Å–∫–∞—Å–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π —Ç–æ–∫–µ–Ω</b>\n\n"
        f"{format_admin_user_line(user_id, username)}\n"
        f"–ü—ñ–¥–ø–∏—Å–∫–∞: <b>{product_name}</b>\n"
        f"–ö–∞—Ä—Ç–∫–∞: <b>{masked_card}</b>\n"
        f"–ü–æ–º–∏–ª–∫–∞: <code>{error_text}</code>\n\n"
        f"üí° –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î –æ—Ñ–æ—Ä–º–∏—Ç–∏ –Ω–æ–≤—É –ø—ñ–¥–ø–∏—Å–∫—É –∑ –Ω–æ–≤–æ—é –∫–∞—Ä—Ç–∫–æ—é"
    )


def get_user_subscription_cancelled_text(product_name: str) -> str:
    """–¢–µ–∫—Å—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É: –ø—ñ–¥–ø–∏—Å–∫–∞ —Å–∫–∞—Å–æ–≤–∞–Ω–∞."""
    return (
        f"üö´ <b>–ü—ñ–¥–ø–∏—Å–∫–∞ —Å–∫–∞—Å–æ–≤–∞–Ω–∞</b>\n\n"
        f"–ü—ñ–¥–ø–∏—Å–∫–∞: <b>{product_name}</b>\n\n"
        f"–ü—ñ–¥–ø–∏—Å–∫–∞ –±—É–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–∞—Å–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –Ω–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–ª–∞—Ç—ñ–∂.\n"
        f"–©–æ–± –ø–æ–Ω–æ–≤–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É, –æ—Ñ–æ—Ä–º—ñ—Ç—å —ó—ó –∑–Ω–æ–≤—É –≤ –∫–∞—Ç–∞–ª–æ–∑—ñ."
    )


def get_admin_subscription_cancelled_text(
    user_id: int, username: str | None, product_name: str
) -> str:
    """–¢–µ–∫—Å—Ç –∞–¥–º—ñ–Ω—É: –ø—ñ–¥–ø–∏—Å–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–∞—Å–æ–≤–∞–Ω–∞."""
    return (
        f"üö´ <b>–ü—ñ–¥–ø–∏—Å–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–∞—Å–æ–≤–∞–Ω–∞</b>\n\n"
        f"{format_admin_user_line(user_id, username)}\n"
        f"–ü—ñ–¥–ø–∏—Å–∫–∞: <b>{product_name}</b>\n\n"
        f"üî¥ –ü—Ä–∏—á–∏–Ω–∞: –ë–∞–≥–∞—Ç–æ –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–± –æ–ø–ª–∞—Ç–∏\n"
        f"üí° –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –ø–æ–Ω–æ–≤–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ"
    )
